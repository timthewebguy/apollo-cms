function initContentEditor(){$(".contentEditor__incrementor").addEventListener("click",function(e){e.preventDefault()}),$(".contentEditor__mediaBrowserLaunch").addEventListener("click",function(e){e.preventDefault(),loadMediaBrowser(this.dataset.addFor)})}function init(){initNavigation(),initContentEditor(),initMediaBrowser()}function initMediaBrowser(){var e=$(".mediaBrowser");$(".mediaBrowser__close").addEventListener("click",closeMediaBrowser),$(".mediaBrowser__cancel").addEventListener("click",closeMediaBrowser),e.addEventListener("dragover",function(t){e.hasClass("visible")&&e.addClass("dragHover"),t.preventDefault()}),e.addEventListener("dragleave",function(t){e.hasClass("visible")&&e.removeClass("dragHover"),t.preventDefault()}),e.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),e.removeClass("dragHover"),validateFileUpload(t.dataTransfer.files)}),$(".mediaBrowser__uploadInput").addEventListener("change",function(){validateFileUpload(this.files)}),$(".mediaBrowser__select").addEventListener("click",function(){$(loadTarget).value=$(".media__radio:checked").value,$(loadTarget).dataset.valueName=$(".media__radio:checked").id,$(".media__radio:checked").checked=!1,$(".mediaBrowser").removeClass("visible")}),deleteButtonEvent()}function closeMediaBrowser(){$(".mediaBrowser").removeClass("visible"),$(".media__radio:checked").checked=!1}function validateFileUpload(e){for(var t=new Array("jpg","png","gif","pdf","psd"),a=new Array,i=0;i<e.length;i++){var n=e[i].name.split("."),s=n.pop(),o=n.join("");t.indexOf(s.toLowerCase())!==-1?a.push(e[i]):window.alert("Your File "+o+" is of type "+s+" which is not allowed. Only jpg, png, gif, or pdf. It will not be uploaded.")}a.length>0&&uploadFiles(a)}function uploadFiles(e){$(".mediaBrowser__uploadProgress").value=0;for(var t=new FormData,a=new XMLHttpRequest,i=0;i<e.length;i++)t.append("uploaded["+i+"]",e[i]);a.onload=function(){updateFileList(this.responseText)},a.addEventListener("progress",function(e){e.lengthComputable&&($(".mediaBrowser__uploadProgress").value=e.loaded/e.total*100)}),a.open("post","/media/upload"),a.send(t)}function updateFileList(e){$(".mediaBrowser__body").innerHTML+=e,deleteButtonEvent()}function deleteButtonEvent(){$(".media__delete").removeEventListener("click",deleteMedia,!1),$(".media__delete").addEventListener("click",deleteMedia,!1)}function deleteMedia(){if(window.confirm("Are you sure you want to delete this media?")){var e=new FormData,t=new XMLHttpRequest;e.append("delete_id",this.dataset.deleteFor),t.open("post","/media/delete"),t.send(e),$("#media-"+this.dataset.deleteFor).addClass("delete")}}function loadMediaBrowser(e){loadTarget="#"+e,""!=$(loadTarget).value&&($("#"+$(loadTarget).dataset.valueName).checked=!0),$(".mediaBrowser").addClass("visible")}function initNavigation(){$(".pageTab").addEventListener("click",function(e){e.preventDefault();var t,a,i=$(".pageTab--active"),n=$("#"+this.id.replace("tab","page")),s=$("#"+i.id.replace("tab","page"));i!=this&&(this.isBefore(i)?(t="pageEditor--enterLeft",a="pageEditor--exitRight"):(t="pageEditor--enterRight",a="pageEditor--exitLeft"),n.addClass(t).addClass("pageEditor--visible"),s.addClass(a).removeClass("pageEditor--visible"),$(".pageTab--active").removeClass("pageTab--active"),this.addClass("pageTab--active"),setTimeout(function(){$(".pageEditor").forEach(function(e){e.removeClass("pageEditor--enterRight").removeClass("pageEditor--enterLeft").removeClass("pageEditor--exitRight").removeClass("pageEditor--exitLeft")})},150))})}function $(e){var t=document.querySelectorAll(e);return 1==t.length?t.item(0):t}window.addEventListener("load",init,!1);var loadTarget;Element.prototype.nodeNumber=function(){for(var e=this,t=0;null!=(e=e.previousElementSibling);)t++;return t},Element.prototype.isBefore=function(e){return this.parentNode!=e.parentNode?(console.log("not the same parent"),!1):!(this.nodeNumber()>e.nodeNumber())},Element.prototype.addClass=function(e){if(this.classList)return this.classList.add(e),this;var t=this.className.split(" ");return t.indexOf(classToAdd)===-1&&(this.className=this.className+(t.length>0?" ":"")+classToAdd),this},Element.prototype.removeClass=function(e){if(this.classList)return this.classList.remove(e),this;var t="";return this.className.split(" ").forEach(function(a){a!=e&&(t+=a+" ")}),this.className=t.replace(/[ \/t]+$/,""),this},Element.prototype.hasClass=function(e){return this.classList?this.classList.contains(e):this.className.split(" ").indexOf(e)!=-1},NodeList.prototype.addEventListener=function(e,t,a){this.forEach(function(i){i.addEventListener(e,t,a||!1)})},NodeList.prototype.removeEventListener=function(e,t,a){this.forEach(function(i){i.removeEventListener(e,t,a||!1)})};